<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flight Booking</title>
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Roboto:wght@400;500;700&display=swap"
        rel="stylesheet">
    <!-- Stylesheet -->
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <!--Header and Menu Section-->
    <header class="container">
        <nav>
            <ul>
                <li><a href="#">Home</a></li>
                <li><a href="#">About Us</a></li>
                <li><a href="#">Contact</a></li>
                <li><a class="active" href="#">Sign Up</a></li>
            </ul>
        </nav>
    </header>

    <!--Booking Section-->
    <main id="main" class="main-content container">
        <div class="booking-form">
            <h3>Booking Flights</h3>
            <div class="input-group">
                <label for="">Flying From</label>
                <input class="inp-style" type="text" name="" placeholder="Dhake, Bangladesh">
            </div>
            <div class="input-group">
                <label for="">Flying To</label>
                <input class="inp-style" type="text" name="" placeholder="New York, United States">
            </div>
            <div class="inputs">
                <div class="input-group">
                    <label" for="">Departure</label>
                        <input class="inp-style" type="date" name="">
                </div>
                <div class="input-group">
                    <label for="">Return</label>
                    <input class="inp-style" type="date" name="">
                </div>
            </div>
            <div class="input-group f-class">
                <div>
                    <label for="">First Class ($150)</label>
                    <input id="firstClassInput" class="inp-style inp-width" type="number" name="">
                </div>
                <div class="plus-minus-btn">
                    <p><span id="firstClassIncreaseBtn" class="btn btn-plus"
                            onclick="ticketHandler('firstClassInput', true);">+</span><span id="firstClassDecreaseBtn"
                            class="btn btn-minus" onclick="ticketHandler('firstClassInput', false)"";>-</span></p>
                </div>
            </div>

            <div class=" input-group f-class">
                            <div>
                                <label for="">Economy ($100)</label>
                                <input id="economyInput" class="inp-style inp-width" type="number" name="">
                            </div>
                            <div class="plus-minus-btn">
                                <p> <span id="economyIncreaseBtn" class="btn btn-plus"
                                        onclick="ticketHandler('economyInput', true);">+</span><span
                                        id="economyDecreaseBtn" class="btn btn-minus"
                                        onclick="ticketHandler('economyInput', false);">-</span> </p>
                            </div>
                </div>
                <div id="priceTag" class="calculations">
                    <div class="amount">
                        <div class="left">
                            <p>Subtotal</p>
                        </div>
                        <div class="right">
                            <p id="subTotalCost"></p>
                        </div>
                    </div>

                    <div class="amount">
                        <div class="left">
                            <p>Charge 10% VAT</p>
                        </div>
                        <div class="right">
                            <p id="vatCharge"></p>
                        </div>
                    </div>
                    <hr>
                    <div class="amount">
                        <div class="left">
                            <h4>Total</h4>
                        </div>
                        <div class="right">
                            <p id="totalCost"></p>
                        </div>
                    </div>
                </div>
                <button id="book-now" class="btn-style" onclick="bookingPopUp()">Book Now</button>
            </div>

            <div class="booking-content">
                <h1>discover <br> around the world</h1>
                <p>Lorem ipsum dolor sit amet consectetur adipisicingelit. Provident voluptatibus quam fuga laborumalias
                    veniam libero autem quasi maxime ullam vero nama imi dolor, architecto ab facilis eaque deserunt
                    nobise
                    voluptatibus quam</p>
            </div>
    </main>

    <!-- section for popup -->
    <section id="window-popup" class="popup-window">
        <div class="popup">
            <h3>Total Cost for Ticket Booking:</h3>
            <div id="cost">
                
            </div>
            <div class="popUp-btn">
                <button id="goBack" class="btn-pop" onclick="backToHome();">Go Back</button>
                <button id="Chek-out" class="btn-pop">Check Out</button>
            </div>
        </div>
    </section>

    <!--Thank You-->

    <script>
        function getElement(id) {
            return document.getElementById(id);
        }
        const firstClassInput = getElement('firstClassInput');
        const economyInput = getElement('economyInput');
        // const firstClassIncreaseBtn = getElement('firstClassIncreaseBtn');
        // const firstClassDecreaseBtn = getElement('firstClassDecreaseBtn');
        // const economyIncreaseBtn = getElement('economyIncreaseBtn');
        // const economyDecreaseBtn = getElement('economyDecreaseBtn');
        const subTotalCost = getElement('subTotalCost');
        const vatCharge = getElement('vatCharge');
        const totalCost = getElement('totalCost');
        const firstClassPrice = 150;
        const economyPrice = 100;

        function ticketHandler(id, isIncrease) {
            const ticketCount = getElement(id);
            if (isIncrease) {
                if (ticketCount.value == '') {
                    ticketCount.value = 1;
                }
                else {
                    ticketCount.value = parseInt(ticketCount.value) + 1;
                }
            }
            else {
                if (ticketCount.value != "" && parseInt(ticketCount.value) > 0) {
                    ticketCount.value = parseInt(ticketCount.value) - 1;
                }
            }
            costCalculator();
        };


        function costCalculator() {
            if (firstClassInput.value == '') {
                firstClassInput.value = 0;
            }
            if (economyInput.value == '') {
                economyInput.value = 0;
            }
            let totalPrice = parseInt(firstClassInput.value) * firstClassPrice + parseInt(economyInput.value) * economyPrice;
            let vat = (totalPrice * 10) / 100;
            subTotalCost.innerText = '$' + totalPrice;
            vatCharge.innerText = '$' + vat;
            totalCost.innerText = '$' + (totalPrice + vat);
        };

        // for popup window after book now button clicked
        function bookingPopUp() {
            let firstClassTicket = parseInt(firstClassInput.value);
            let economyTicket = parseInt(economyInput.value);
            if (firstClassTicket > 0) {
                document.getElementById('cost').appendChild(setPriceTag(firstClassTicket, true));
            }
            if (economyTicket > 0) {
                document.getElementById('cost').appendChild(setPriceTag(economyTicket, false));
            }
            if (firstClassInput.value == '' && economyInput.value == '') {
                noTicketSetup();
            }
            if (firstClassTicket <= 0 && economyTicket <= 0) {
                noTicketSetup();
            }
            
            let costDiv = (document.getElementById('priceTag')).cloneNode(true);
            costDiv.className = 'ticketInfo';
            document.getElementById('cost').append(costDiv);

            
            document.getElementById('main').style.opacity = '.1';
            document.getElementById('window-popup').style.display = 'flex';

        }

        function noTicketSetup() {
            let popUpForNull = document.createElement('p');
            popUpForNull.innerText = 'No ticket selected..!';
            popUpForNull.className = 'ticketInfo';
            document.getElementById('cost').appendChild(popUpForNull);
            
        }

        // setting price tag in the pop up window
        function setPriceTag(ticket_count, isFirstClass) {
            let ticketName = document.createElement('p');
            let totalTicketPrice = document.createElement('p');
            if (isFirstClass) {
                ticketName.innerText = 'First Class ($150)';
                totalTicketPrice.innerText = 'Cost: $' + (ticket_count * 150);
            }
            else {
                ticketName.innerText = 'Economy ($100)';
                totalTicketPrice.innerText = 'Cost: $' + (ticket_count * 100);
            }
            let ticketQty = document.createElement('p');
            ticketQty.innerText = 'Quantity: ' + ticket_count;

            let priceTagDiv = document.createElement("div");
            priceTagDiv.appendChild(ticketName);
            priceTagDiv.appendChild(ticketQty);
            priceTagDiv.appendChild(totalTicketPrice);
            priceTagDiv.classList = 'ticketInfo';
            return priceTagDiv;
        }

        function backToHome(){
            document.getElementById('cost').innerHTML = '';            
            document.getElementById('main').style.opacity = '1';
            document.getElementById('window-popup').style.display = 'none';
        }

        // let ticketName = document.createElement('p');
        // ticketName.innerText = 'First Class ($150)';
        // let ticketQty = document.createElement('p');
        // ticketQty.innerText = 'Quantity: ' + firstClassTicket;
        // let totalTicketPrice = document.createElement('p');
        // totalTicketPrice.innerText = 'Cost: ' + (firstClassTicket * 150);

            // firstClassIncreaseBtn.addEventListener('click', function () {
            //     if (firstClassInput.value == '') {
            //         firstClassInput.value = 1;
            //     }
            //     else {
            //         firstClassInput.value = parseInt(firstClassInput.value) + 1;
            //     }
            // });
            // firstClassDecreaseBtn.addEventListener('click', function () {
            //     if (firstClassInput.value != "" && parseInt(firstClassInput.value) > 0) {
            //         firstClassInput.value = parseInt(firstClassInput.value) - 1;
            //     }
            // });


    </script>
</body>

</html>